version: 2.1
orbs:
  node: circleci/node@5
jobs:
  install-dependencies:
    executor: node/default
    steps:
      - checkout
      - run: echo "Building things..."
      - run: npm install

  lint-code:
    executor: node/default
    steps:
      - checkout
      - run: npm install
      - run: npm install --no-save eslint
      - run: |
          echo '{
            "env": {
              "browser": true,
              "node": true,
              "es2021": true
            },
            "extends": "eslint:recommended",
            "parserOptions": {
              "ecmaVersion": 12,
              "sourceType": "module"
            }
          }' > .eslintrc.json
      - run: npx eslint .  # Run ESLint
      - run: npx eslint .

workflows:
  version: 2
  build-and-lint:
    jobs:
      - install-dependencies
      - lint-code:
          requires:
            - install-dependencies

